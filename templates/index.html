<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sports Predict</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>AI Sports Predict (beta)</h1>

        <div class="card">
            <h2>NBA Player Point Spread Prediction</h2>
            <form id="predictionForm">
                <div class="form-group">
                    <label for="playerName">Player Name</label>
                    <input type="text" id="playerName" placeholder="e.g., LeBron James" required list="player-list" autocomplete="off">
                    <div class="helper-text">Enter the player's full name</div>
                </div>

                <div class="form-group">
                    <label>Current Team</label>
                    <div id="playerTeamDisplay" style="padding: 12px; background: #f8f9fa; border: 2px solid #ddd; border-radius: 6px; color: #555; min-height: 48px; display: flex; align-items: center;">
                        <span style="font-style: italic; opacity: 0.7;">Select a player...</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Matchup Details</label>
                    <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                        
                        <div class="toggle-group" style="display: flex; gap: 5px;">
                            <input type="radio" id="loc-home" name="location" value="vs" checked hidden>
                            <label for="loc-home" class="toggle-btn">vs (Home)</label>
                            
                            <input type="radio" id="loc-away" name="location" value="@" hidden>
                            <label for="loc-away" class="toggle-btn">@ (Away)</label>
                        </div>

                        <select id="opponentSelect" style="flex-grow: 1; padding: 12px; border: 2px solid #ddd; border-radius: 6px; background: white; min-width: 150px;" required>
                            <option value="" disabled selected>Select Opponent</option>
                            </select>
                    </div>
                    <div class="helper-text">Select location and opponent team</div>
                </div>

                <div class="form-group">
                    <label for="spread">Point Spread</label>
                    <input type="number" id="spread" step="0.5" placeholder="e.g., 25.5" required>
                    <div class="helper-text">Enter the over/under line</div>
                </div>

                <button type="submit">Get Prediction</button>
            </form>

            <div class="loading" id="predictionLoading">
                <p>Analyzing data...</p>
            </div>

            <div class="error" id="predictionError"></div>

            <div class="result" id="predictionResult">
                <h3 id="pickText"></h3>
                
                <div class="result-details">
                    <div class="result-item">
                        <strong>Projected</strong>
                        <span id="projectedPoints"></span>
                    </div>
                    <div class="result-item">
                        <strong>Confidence</strong>
                        <span id="confidenceValue" style="color: #28a745; font-weight: bold;"></span>
                    </div>
                    <div class="result-item">
                        <strong>Edge</strong>
                        <span id="edgeValue"></span>
                    </div>
                </div>

                <div style="margin-top: 15px; border-top: 1px solid #eee; padding-top: 10px;">
                    <div style="font-size: 0.9em; font-weight: bold; margin-bottom: 5px; color: #555;">Top Model Factors:</div>
                    <ul id="factorsList" style="list-style: none; padding: 0; margin: 0; font-size: 0.85em; color: #666;">
                        </ul>
                </div>

                <p style="margin-top: 10px; font-style: italic; color: #999; font-size: 0.8em;" id="confidenceNote"></p>
            </div>
        </div>

        <div class="card">
            <h2>Recent Player Stats</h2>
            <form id="statsForm">
                <div class="form-group">
                    <label for="statsPlayerName">Player Name</label>
                    <input type="text" id="statsPlayerName" placeholder="e.g., Stephen Curry" required list="player-list">
                    <div class="helper-text">Enter the player's full name to see their most recent game</div>
                </div>

                <button type="submit">Get Stats</button>
            </form>

            <div class="loading" id="statsLoading">
                <p>Fetching stats...</p>
            </div>

            <div class="error" id="statsError"></div>

            <div class="stats-grid" id="statsResult" style="display: none;">
                <div class="stat-box">
                    <div class="stat-label">Points</div>
                    <div class="stat-value" id="statPts">-</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Rebounds</div>
                    <div class="stat-value" id="statReb">-</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Assists</div>
                    <div class="stat-value" id="statAst">-</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Minutes</div>
                    <div class="stat-value" id="statMin">-</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">FG%</div>
                    <div class="stat-value" id="statFgPct">-</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Opponent</div>
                    <div class="stat-value" id="statOpp" style="font-size: 18px;">-</div>
                </div>
            </div>
        </div>
    </div>
    
    <datalist id="player-list"></datalist>

    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
</body>
</html>